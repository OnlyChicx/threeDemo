{"version":3,"file":"js/app.b0fb9f37.js","mappings":"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","sources":["webpack://3dproject/./src/App.vue","webpack://3dproject/./src/components/HelloWorld.vue","webpack://3dproject/./src/components/HelloWorld.vue?bd04","webpack://3dproject/./src/App.vue?7ccd","webpack://3dproject/./src/main.js","webpack://3dproject/webpack/bootstrap","webpack://3dproject/webpack/runtime/chunk loaded","webpack://3dproject/webpack/runtime/compat get default export","webpack://3dproject/webpack/runtime/define property getters","webpack://3dproject/webpack/runtime/global","webpack://3dproject/webpack/runtime/hasOwnProperty shorthand","webpack://3dproject/webpack/runtime/jsonp chunk loading","webpack://3dproject/webpack/startup"],"sourcesContent":["<template>\n  <HelloWorld/>\n</template>\n\n<script>\nimport HelloWorld from './components/HelloWorld.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HelloWorld\n  }\n}\n</script>\n\n<style>\n</style>\n","<template>\n  <div class=\"container\">\n    <canvas ref=\"screenBottom\"></canvas>\n    <canvas ref=\"screenTop\"></canvas>\n\n    <div class=\"button-box\">\n      <div class=\"button\" @click=\"reset\">再来一次</div>\n      <div class=\"button\" @click=\"submit\">兑奖</div>\n    </div>\n\n    <div v-if=\"isShowDialog\" class=\"dialog\">\n      <div class=\"body\">\n        <div class=\"content\">{{content}}</div>\n        <div class=\"bottom-button\" @click=\"dialogSubmit\">{{buttonText}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\"\nimport rough from 'roughjs/bundled/rough.cjs.js'\n\nconst screenBottom = ref(null)\nconst screenTop = ref(null)\nconst isE = ref(false)\nconst eX = ref(0)\nconst eY = ref(0)\n\nconst target = ref(0)\nconst prizeList = ref([])\nconst prizeDotsList = ref([])\nconst prizeResultList = ref([])\n\n// 奖项数据\nconst gap = 30\nconst count = 4\nconst sH = 200\nconst iWidth = (window.innerWidth - gap * (count + 1)) / count\nconst iHeight = iWidth / 1.5\n\n// 是否中奖\nconst isWin = ref(false)\n// 目标是否刮开\nconst isShowTarget = ref(false)\n\nconst content = ref('¥1畅玩一次')\nconst buttonText = ref('已自觉给小裴转¥1')\n\nconst isShowDialog = ref(true)\n\nonMounted(() => {\n  // console.log(window)\n  window.addEventListener('resize', function () {\n    init()\n  })\n  init()\n});\n\n/**\n * 重新获取中奖值\n */\nconst getTarget = () => Math.round(Math.random() * 100)\n\n/**\n * 重新获取奖品列表\n */\nconst getPrizeList = () => [...new Array(100).keys()].sort(() => Math.random() * 2 - 1).slice(0, 20).map(i => i + 1)\n/**\n * 重置是否刮开列表\n */\nconst getPrizeResultList = () => [...new Array(20)].fill(false)\n\nconst init = () => {\n  target.value = getTarget()\n  prizeList.value = getPrizeList()\n  prizeResultList.value = getPrizeResultList()\n  initBottom()\n  initTop()\n\n}\n/**\n * 初始化底部画布\n */\nconst initBottom = () => {\n  screenBottom.value.width = window.innerWidth\n  screenBottom.value.height = window.innerHeight\n  const ctx = rough.canvas(screenBottom.value)\n  ctx.rectangle(0, 0, window.innerWidth, window.innerHeight, { fill: 'green' })\n\n  drawPrize(ctx)\n}\n\n/**\n * 初始化顶部画布\n */\nconst initTop = () => {\n  screenTop.value.width = window.innerWidth\n  screenTop.value.height = window.innerHeight\n  const ctx = rough.canvas(screenTop.value)\n\n  // ctx.rectangle(0, 0, window.innerWidth, window.innerHeight, { fill: 'orange', fillStyle: 'solid' })\n  const startX = window.innerWidth / 2 - 100\n  ctx.rectangle(startX, 20, 200, 100, { fill: 'gray', fillStyle: 'solid' })\n  ctx.ctx.textAlign = 'center'\n  ctx.ctx.textBaseline = 'middle'\n  ctx.ctx.fillStyle = '#cccccc'\n  ctx.ctx.font = 'bold 50px Arial'\n  ctx.ctx.fillText('目标球数', window.innerWidth / 2, 70)\n\n\n  prizeDotsList.value.forEach(([sX, sY]) => {\n    ctx.rectangle(sX, sY, iWidth, iHeight, { fill: 'gray', fillStyle: 'solid' })\n  })\n\n  screenTop.value.addEventListener('touchstart', function (e) {\n    isE.value = true\n    eX.value = e.targetTouches[0].clientX\n    eY.value = e.targetTouches[0].clientY\n  })\n\n  screenTop.value.addEventListener('touchmove', function (e) {\n    e.preventDefault()\n    if (!isE.value) return\n    clearMask(ctx, e.targetTouches[0].clientX, e.targetTouches[0].clientY)\n    // openArea(ctx, e.targetTouches[0].clientX, e.targetTouches[0].clientY)\n  })\n\n  screenTop.value.addEventListener('touchend', function () {\n    isE.value = false\n  })\n}\n\n/**\n * 设置奖项\n */\nconst drawPrize = (ctx) => {\n  const startX = window.innerWidth / 2 - 100\n  \n  ctx.rectangle(startX, 20, 200, 100, { fill: 'blue' })\n  ctx.ctx.textAlign = 'center'\n  ctx.ctx.textBaseline = 'middle'\n  ctx.ctx.fillStyle = 'yellow'\n  ctx.ctx.font = 'bold 50px Arial'\n  ctx.ctx.fillText(target.value, window.innerWidth / 2, 70)\n\n  for (let i = 0; i < 5; i++) {\n    for (let j = 0; j < count; j++) {\n      const sX = (j + 1) * gap + j * iWidth\n      const sY = sH + (i + 1) * gap + i * iHeight\n      prizeDotsList.value.push([sX, sY])\n      ctx.rectangle(sX, sY, iWidth, iHeight, { fill: 'red' })\n      ctx.ctx.font = '20px Arial'\n      ctx.ctx.fillStyle = 'black'\n      ctx.ctx.fillText(prizeList.value[i * 4 + j], sX + iWidth / 2, sY + iHeight / 2)\n    }\n  }\n}\n\n/**\n * 查看已刮开区域\n */\nconst openArea = async (ctx) => {\n  const imageData = ctx.ctx.getImageData(0, 0, window.innerWidth, window.innerHeight).data\n\n  // 判断顶部是否刮开\n  const startX = window.innerWidth / 2 - 50\n\n  return new Promise((resolve) => {\n    if (!isShowTarget.value) {\n      let topCount = 0\n      for (let i = 0; i < 100; i++) {\n        for (let j = 0; j < 100; j++) {\n          const dot = 20 * window.innerWidth + startX + window.innerWidth * i + j\n\n          if (imageData[dot * 4 - 1] === 0) {\n            topCount++\n          }\n          if (i === 99 && j === 99) {\n            resolve('11')\n          }\n        }\n      }\n      console.log(topCount)\n\n      if (topCount / 10000 > 0.3) {\n        console.log('top')\n        isShowTarget.value = true\n      }\n    }\n    const lastFalse = prizeResultList.value.findLastIndex(i => !i)\n\n    if (lastFalse === -1) {\n      resolve('22')\n    }\n\n    for (let k = 0; k < 20; k++) {\n      const [sX, sY] = prizeDotsList.value[k]\n      if (!prizeResultList.value[k]) {\n        let count = 0\n        for (let i = 0; i < iHeight; i++) {\n          for (let j = 0; j < iWidth; j++) {\n            const dot = sY * window.innerWidth + sX + window.innerWidth * i + j\n\n            if (imageData[dot * 4 - 1] === 0) {\n              count++\n              console.log(imageData[dot * 4 - 1])\n            }\n\n            if (k === lastFalse && i + 1 >= iHeight && j + 1 >= iWidth) {\n              if (count / (iHeight * iWidth) > 0.4) {\n                prizeResultList.value[k] = true\n                if (prizeList.value[k] === target.value) {\n                  isWin.value = true\n                  console.log('vsjlle')\n                }\n              }\n              resolve('33')\n            }\n          }\n        }\n\n        if (count / (iHeight * iWidth) > 0.4) {\n          prizeResultList.value[k] = true\n          if (prizeList.value[k] === target.value) {\n            isWin.value = true\n            console.log('vsjlle')\n          }\n        }\n      }\n    }\n  })\n}\n/**\n * 清除图像\n */\nconst clearMask = (ctx, tX, tY) => {\n  ctx.ctx.globalCompositeOperation = \"destination-out\"\n  ctx.line(eX.value, eY.value, tX, tY, { strokeWidth: 6 })\n  eX.value = tX\n  eY.value = tY\n}\n\nconst reset = () => {\n  init()\n  content.value = '记得小裴的¥1哦～'\n  buttonText.value = '已自觉给小裴转¥1'\n  isShowDialog.value = true\n}\n\nconst submit = async () => {\n  const ctx = rough.canvas(screenTop.value)\n  const res = await openArea(ctx)\n  console.log(res)\n  if (!isShowTarget.value) {\n    console.log('没有开奖')\n    content.value = '请刮开目标哦！'\n    buttonText.value = '知道了'\n    isShowDialog.value = true\n    return\n  }\n  if (isWin.value) {\n    console.log('中奖了')\n    content.value = '恭喜你喜得¥2！'\n    buttonText.value = '去找小裴兑奖'\n  } else if (prizeResultList.value.filter(i => i).length < 20) {\n    console.log('没有刮完')\n    content.value = '你还没有刮完哦！'\n    buttonText.value = '继续刮'\n  } else {\n    console.log('没有中奖')\n    content.value = '很抱歉你没有中奖'\n    buttonText.value = '再来一次'\n  }\n  isShowDialog.value = true\n  console.log(`一共刮开了${prizeResultList.value.filter(i => i).length}个`, prizeResultList.value)\n}\n\nconst dialogSubmit = () => {\n  isShowDialog.value = false\n  content.value = ''\n  buttonText.value = ''\n}\n</script>\n\n<style scoped lang=\"sass\">\n.container\n  display: flex\n  position: relative\n\n  canvas:nth-child(2)\n    position: absolute\n    left: 0\n    top: 0\n    width: 100vw\n    height: 100vh\n  \n  .button-box\n    display: flex\n    position: absolute\n    bottom: 50px\n    left: 50%\n    transform: translateX(-50%)\n    width: 100vw\n    justify-content: center\n\n    .button\n      height: 50px\n      width: 100px\n      display: flex\n      justify-content: center\n      align-items: center\n      background-color: #fff\n      border: 1px solid #000000\n      border-radius: 16px\n\n      &:first-child\n        margin-right: 15px\n\n  .dialog\n    position: fixed\n    top: 0\n    left: 0\n    width: 100vw\n    height: 100vh\n    background-color: #000000cc\n\n    .body\n      width: 70vw\n      height: 25vh\n      background-color: #fff\n      position: absolute\n      top: 50%\n      left: 50%\n      transform: translate(-50%, -50%)\n      display: flex\n      flex-direction: column\n      align-items: center\n      justify-content: space-between\n      padding-top: 50px\n      padding-bottom: 20px\n      border-radius: 10px\n\n      .content\n        font-size: 32px\n        display: flex\n        justify-content: center\n\n      .bottom-button\n        min-width: 60px\n        padding: 0 10px\n        height: 30px\n        background-color: #000\n        color: #fff\n        border-radius: 10px\n        display: flex\n        justify-content: center\n        align-items: center\n</style>","import script from \"./HelloWorld.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HelloWorld.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HelloWorld.vue?vue&type=style&index=0&id=9a0dfafe&scoped=true&lang=sass\"\n\nimport exportComponent from \"/Users/lj/Documents/myProject/3dproject/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9a0dfafe\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=f5a548b8\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/lj/Documents/myProject/3dproject/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './style/common.sass'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_3dproject\"] = self[\"webpackChunk_3dproject\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(8416); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_HelloWorld","screenBottom","ref","screenTop","isE","eX","eY","target","prizeList","prizeDotsList","prizeResultList","gap","count","sH","iWidth","window","innerWidth","iHeight","isWin","isShowTarget","content","buttonText","isShowDialog","onMounted","addEventListener","init","getTarget","Math","round","random","getPrizeList","Array","keys","sort","slice","map","i","getPrizeResultList","fill","value","initBottom","initTop","width","height","innerHeight","ctx","rough","rectangle","drawPrize","startX","fillStyle","textAlign","textBaseline","font","fillText","forEach","sX","sY","e","targetTouches","clientX","clientY","preventDefault","clearMask","j","push","openArea","async","imageData","getImageData","data","Promise","resolve","topCount","dot","console","log","lastFalse","findLastIndex","k","tX","tY","globalCompositeOperation","line","strokeWidth","reset","submit","res","filter","length","dialogSubmit","__exports__","name","components","HelloWorld","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}