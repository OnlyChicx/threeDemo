(function(){"use strict";var e={8416:function(e,n,t){var l=t(9242),o=t(3396);function i(e,n,t,l,i,a){const r=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.j4)(r)}t(7658),t(7287);var a=t(7139),r=t(4870),u=t(2410),c=t.n(u);const v={class:"container"},s={key:0,class:"dialog"},d={class:"body"},f={class:"content"};var w={__name:"HelloWorld",setup(e){const n=(0,r.iH)(null),t=(0,r.iH)(null),l=(0,r.iH)(!1),i=(0,r.iH)(0),u=(0,r.iH)(0),w=(0,r.iH)(0),h=(0,r.iH)([]),g=(0,r.iH)([]),p=(0,r.iH)([]),x=30,b=4,y=200,H=(window.innerWidth-x*(b+1))/b,m=H/1.5,W=(0,r.iH)(!1),_=(0,r.iH)(!1),k=(0,r.iH)("¥1畅玩一次"),O=(0,r.iH)("已自觉给小裴转¥1"),j=(0,r.iH)(!0);(0,o.bv)((()=>{window.addEventListener("resize",(function(){E()})),E()}));const T=()=>Math.round(100*Math.random()),A=()=>[...new Array(100).keys()].sort((()=>2*Math.random()-1)).slice(0,20).map((e=>e+1)),C=()=>[...new Array(20)].fill(!1),E=()=>{w.value=T(),h.value=A(),p.value=C(),L(),S()},L=()=>{n.value.width=window.innerWidth,n.value.height=window.innerHeight;const e=c().canvas(n.value);e.rectangle(0,0,window.innerWidth,window.innerHeight,{fill:"green"}),D(e)},S=()=>{t.value.width=window.innerWidth,t.value.height=window.innerHeight;const e=c().canvas(t.value),n=window.innerWidth/2-100;e.rectangle(n,20,200,100,{fill:"gray",fillStyle:"solid"}),e.ctx.textAlign="center",e.ctx.textBaseline="middle",e.ctx.fillStyle="#cccccc",e.ctx.font="bold 50px Arial",e.ctx.fillText("目标球数",window.innerWidth/2,70),g.value.forEach((([n,t])=>{e.rectangle(n,t,H,m,{fill:"gray",fillStyle:"solid"})})),t.value.addEventListener("touchstart",(function(e){l.value=!0,i.value=e.targetTouches[0].clientX,u.value=e.targetTouches[0].clientY})),t.value.addEventListener("touchmove",(function(n){n.preventDefault(),l.value&&z(e,n.targetTouches[0].clientX,n.targetTouches[0].clientY)})),t.value.addEventListener("touchend",(function(){l.value=!1}))},D=e=>{const n=window.innerWidth/2-100;e.rectangle(n,20,200,100,{fill:"blue"}),e.ctx.textAlign="center",e.ctx.textBaseline="middle",e.ctx.fillStyle="yellow",e.ctx.font="bold 50px Arial",e.ctx.fillText(w.value,window.innerWidth/2,70);for(let t=0;t<5;t++)for(let n=0;n<b;n++){const l=(n+1)*x+n*H,o=y+(t+1)*x+t*m;g.value.push([l,o]),e.rectangle(l,o,H,m,{fill:"red"}),e.ctx.font="20px Arial",e.ctx.fillStyle="black",e.ctx.fillText(h.value[4*t+n],l+H/2,o+m/2)}},M=async e=>{const n=e.ctx.getImageData(0,0,window.innerWidth,window.innerHeight).data,t=window.innerWidth/2-50;return new Promise((e=>{if(!_.value){let l=0;for(let o=0;o<100;o++)for(let i=0;i<100;i++){const a=20*window.innerWidth+t+window.innerWidth*o+i;0===n[4*a-1]&&l++,99===o&&99===i&&e("11")}console.log(l),l/1e4>.3&&(console.log("top"),_.value=!0)}const l=p.value.findLastIndex((e=>!e));-1===l&&e("22");for(let t=0;t<20;t++){const[o,i]=g.value[t];if(!p.value[t]){let a=0;for(let r=0;r<m;r++)for(let u=0;u<H;u++){const c=i*window.innerWidth+o+window.innerWidth*r+u;0===n[4*c-1]&&(a++,console.log(n[4*c-1])),t===l&&r+1>=m&&u+1>=H&&(a/(m*H)>.4&&(p.value[t]=!0,h.value[t]===w.value&&(W.value=!0,console.log("vsjlle"))),e("33"))}a/(m*H)>.4&&(p.value[t]=!0,h.value[t]===w.value&&(W.value=!0,console.log("vsjlle")))}}}))},z=(e,n,t)=>{e.ctx.globalCompositeOperation="destination-out",e.line(i.value,u.value,n,t,{strokeWidth:6}),i.value=n,u.value=t},B=()=>{E(),k.value="记得小裴的¥1哦～",O.value="已自觉给小裴转¥1",j.value=!0},I=async()=>{const e=c().canvas(t.value),n=await M(e);if(console.log(n),!_.value)return console.log("没有开奖"),k.value="请刮开目标哦！",O.value="知道了",void(j.value=!0);W.value?(console.log("中奖了"),k.value="恭喜你喜得¥2！",O.value="去找小裴兑奖"):p.value.filter((e=>e)).length<20?(console.log("没有刮完"),k.value="你还没有刮完哦！",O.value="继续刮"):(console.log("没有中奖"),k.value="很抱歉你没有中奖",O.value="再来一次"),j.value=!0,console.log(`一共刮开了${p.value.filter((e=>e)).length}个`,p.value)},P=()=>{j.value=!1,k.value="",O.value=""};return(e,l)=>((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("canvas",{ref_key:"screenBottom",ref:n},null,512),(0,o._)("canvas",{ref_key:"screenTop",ref:t},null,512),(0,o._)("div",{class:"button-box"},[(0,o._)("div",{class:"button",onClick:B},"再来一次"),(0,o._)("div",{class:"button",onClick:I},"兑奖")]),j.value?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",d,[(0,o._)("div",f,(0,a.zw)(k.value),1),(0,o._)("div",{class:"bottom-button",onClick:P},(0,a.zw)(O.value),1)])])):(0,o.kq)("",!0)]))}},h=t(89);const g=(0,h.Z)(w,[["__scopeId","data-v-9a0dfafe"]]);var p=g,x={name:"App",components:{HelloWorld:p}};const b=(0,h.Z)(x,[["render",i]]);var y=b;(0,l.ri)(y).mount("#app")}},n={};function t(l){var o=n[l];if(void 0!==o)return o.exports;var i=n[l]={exports:{}};return e[l](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,l,o,i){if(!l){var a=1/0;for(v=0;v<e.length;v++){l=e[v][0],o=e[v][1],i=e[v][2];for(var r=!0,u=0;u<l.length;u++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](l[u])}))?l.splice(u--,1):(r=!1,i<a&&(a=i));if(r){e.splice(v--,1);var c=o();void 0!==c&&(n=c)}}return n}i=i||0;for(var v=e.length;v>0&&e[v-1][2]>i;v--)e[v]=e[v-1];e[v]=[l,o,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var l in n)t.o(n,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,l){var o,i,a=l[0],r=l[1],u=l[2],c=0;if(a.some((function(n){return 0!==e[n]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(u)var v=u(t)}for(n&&n(l);c<a.length;c++)i=a[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(v)},l=self["webpackChunk_3dproject"]=self["webpackChunk_3dproject"]||[];l.forEach(n.bind(null,0)),l.push=n.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(8416)}));l=t.O(l)})();
//# sourceMappingURL=app.b0fb9f37.js.map